# consensus-engine

├── .github
  ├── af-config
    ├── license-header.config.json
    ├── LICENSE_HEADER
    └── repo-analyzer.config.json
  ├── repo-analysis-output
    ├── dependencies.json
    ├── dependencies.md
    ├── file-summaries.json
    ├── file-summaries.md
    ├── SUMMARY.md
    ├── tree.json
    └── tree.md
  └── workflows
    └── af_maintenance.yml
├── docs
  ├── async_run_persistence.md
  ├── MULTI_PERSONA_ORCHESTRATION.md
  ├── PROMPT_CONTRACTS.md
  ├── ROADMAP_PACKET_ARCHITECTURE.md
  ├── SCHEMA_REGISTRY.md
  ├── SCHEMA_VERSIONING.md
  ├── VERSION_TRACKING.md
  ├── WEB_FRONTEND.md
  └── WORKER_DEPLOYMENT.md
├── examples
  └── test_full_review.py
├── infra
  └── cloudrun
    ├── terraform
      ├── main.tf
      ├── outputs.tf
      ├── README.md
      ├── terraform.tfvars.example
      └── variables.tf
    ├── backend-service.yaml
    ├── frontend-service.yaml
    └── README.md
├── migrations
  ├── versions
    ├── 1be7b272f496_add_analytics_index_for_decision_and_.py
    ├── 453a79c83bde_add_versioned_run_tables.py
    ├── 77563d1e925b_add_async_run_and_step_progress.py
    ├── 9a73090ad792_initial_empty_migration.py
    └── a1b2c3d4e5f6_add_version_tracking_to_runs.py
  ├── env.py
  ├── README
  └── script.py.mako
├── scripts
  └── generate-api-client.sh
├── src
  └── consensus_engine
    ├── api
      ├── routes
        ├── __init__.py
        ├── expand.py
        ├── full_review.py
        ├── full_review.py.backup
        ├── health.py
        ├── review.py
        └── runs.py
      ├── __init__.py
      ├── dependencies.py
      └── validation.py
    ├── clients
      ├── __init__.py
      ├── openai_client.py
      └── pubsub.py
    ├── config
      ├── __init__.py
      ├── instruction_builder.py
      ├── llm_steps.py
      ├── logging.py
      ├── personas.py
      └── settings.py
    ├── db
      ├── __init__.py
      ├── dependencies.py
      ├── models.py
      └── repositories.py
    ├── schemas
      ├── __init__.py
      ├── proposal.py
      ├── registry.py
      ├── requests.py
      ├── review.py
      └── validation.py
    ├── services
      ├── __init__.py
      ├── aggregator.py
      ├── diff.py
      ├── expand.py
      ├── orchestrator.py
      └── review.py
    ├── workers
      ├── __init__.py
      └── pipeline_worker.py
    ├── __init__.py
    ├── app.py
    └── exceptions.py
├── tests
  ├── fixtures
    ├── schemas
      ├── decision_aggregation_v1.0.0.json
      ├── expanded_proposal_v1.0.0.json
      ├── persona_review_v1.0.0.json
      └── run_status_v1.0.0.json
    └── README.md
  ├── integration
    ├── __init__.py
    ├── test_acceptance_criteria.py
    ├── test_app.py
    ├── test_db.py
    ├── test_diff_endpoint.py
    ├── test_expand_endpoint.py
    ├── test_expand_service.py
    ├── test_full_review_endpoint.py
    ├── test_job_enqueue.py
    ├── test_multi_persona.py
    ├── test_pipeline_worker.py
    ├── test_review_endpoint.py
    ├── test_review_service.py
    ├── test_revision_endpoint.py
    ├── test_runs_endpoint.py
    └── test_version_tracking_api.py
  ├── unit
    ├── __init__.py
    ├── test_aggregator.py
    ├── test_api_validation.py
    ├── test_config.py
    ├── test_db.py
    ├── test_diff_endpoint.py
    ├── test_diff_service.py
    ├── test_exceptions.py
    ├── test_expand_service.py
    ├── test_instruction_builder.py
    ├── test_llm_steps.py
    ├── test_models.py
    ├── test_openai_client.py
    ├── test_orchestrator.py
    ├── test_personas.py
    ├── test_pipeline_worker.py
    ├── test_proposal_schemas.py
    ├── test_pubsub.py
    ├── test_request_schemas.py
    ├── test_request_validation.py
    ├── test_review_schemas.py
    ├── test_review_service.py
    ├── test_schema_registry.py
    ├── test_schema_validation.py
    ├── test_validation.py
    └── test_version_tracking.py
  ├── __init__.py
  ├── conftest.py
  └── README.md
├── webapp
  ├── public
    └── vite.svg
  ├── src
    ├── api
      ├── generated
        ├── core
          ├── ApiError.ts
          ├── ApiRequestOptions.ts
          ├── ApiResult.ts
          ├── CancelablePromise.ts
          ├── OpenAPI.ts
          └── request.ts
        ├── models
          ├── BlockingIssue.ts
          ├── Concern.ts
          ├── CreateRevisionRequest.ts
          ├── DecisionAggregation.ts
          ├── DecisionEnum.ts
          ├── DetailedScoreBreakdown.ts
          ├── ExpandIdeaRequest.ts
          ├── ExpandIdeaResponse.ts
          ├── FullReviewRequest.ts
          ├── HealthResponse.ts
          ├── HTTPValidationError.ts
          ├── JobEnqueuedResponse.ts
          ├── MinorityReport.ts
          ├── PersonaReview.ts
          ├── PersonaReviewSummary.ts
          ├── PersonaScoreBreakdown.ts
          ├── ReviewIdeaRequest.ts
          ├── ReviewIdeaResponse.ts
          ├── RunDetailResponse.ts
          ├── RunDiffResponse.ts
          ├── RunListItemResponse.ts
          ├── RunListResponse.ts
          ├── StepProgressSummary.ts
          └── ValidationError.ts
        ├── services
          ├── ExpandService.ts
          ├── FullReviewService.ts
          ├── HealthService.ts
          ├── ReviewService.ts
          ├── RootService.ts
          └── RunsService.ts
        └── index.ts
      └── client.ts
    ├── assets
      └── react.svg
    ├── components
      ├── layout
        ├── Container.tsx
        ├── Header.tsx
        └── index.ts
      ├── ui
        ├── Button.tsx
        ├── ErrorBoundary.tsx
        ├── index.ts
        └── StatusBadge.tsx
      ├── DiffView.tsx
      ├── IdeaForm.tsx
      ├── JsonToggle.tsx
      ├── MinorityReport.tsx
      ├── PersonaReviewModal.tsx
      ├── RevisionModal.tsx
      ├── RoadmapPacket.tsx
      ├── RunHistoryList.tsx
      └── Timeline.tsx
    ├── config
      └── index.ts
    ├── hooks
      ├── useRunHistory.ts
      └── useRunPolling.ts
    ├── pages
      └── RunDashboard.tsx
    ├── state
      ├── runs.ts
      └── selectors.ts
    ├── styles
      └── roadmap.css
    ├── App.css
    ├── App.tsx
    ├── index.css
    └── main.tsx
  ├── .env.example
  ├── .gitignore
  ├── .prettierignore
  ├── .prettierrc.json
  ├── eslint.config.js
  ├── index.html
  ├── openapi.json
  ├── package-lock.json
  ├── package.json
  ├── postcss.config.js
  ├── README.md
  ├── tailwind.config.js
  ├── tsconfig.app.json
  ├── tsconfig.json
  ├── tsconfig.node.json
  └── vite.config.ts
├── .env.example
├── .gitignore
├── alembic.ini
├── docker-compose.yml
├── IMPLEMENTATION_SUMMARY.md
├── IMPLEMENTATION_SUMMARY_full_review_persistence.md
├── IMPLEMENTATION_SUMMARY_pipeline_worker.md
├── IMPLEMENTATION_SUMMARY_revision_workflow.md
├── IMPLEMENTATION_SUMMARY_roadmap_packet.md
├── LICENSE
├── LLMs.md
├── pyproject.toml
└── README.md